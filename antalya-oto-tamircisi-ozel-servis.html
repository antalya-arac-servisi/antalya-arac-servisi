<!DOCTYPE html>
<html lang="tr">
<head>
    <!-- Mevcut stil ve meta tag'leri aynı kalacak -->
    <style>
        /* Mevcut CSS kodunuz aynı */
    </style>
</head>
<body>
    <div class="blog-container">
        <h1>Son Blog Yazıları</h1>
        <div id="blog-posts">
            <p>Yazılar yükleniyor...</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const feedUrl = "https://feeds.feedburner.com/antalya-oto-tamircisi/VXnM6gtoSRp";
            const blogContainer = document.getElementById('blog-posts');
            
            // 1. Yeni CORS Proxy Kullanımı
            const proxyUrl = "https://api.allorigins.win/get?url=" + encodeURIComponent(feedUrl);

            fetch(proxyUrl)
                .then(response => response.json())
                .then(data => {
                    const parser = new DOMParser();
                    const xmlDoc = parser.parseFromString(data.contents, "text/xml");
                    
                    // 2. Doğru XML Etiketlerini Kullanma
                    const items = xmlDoc.querySelectorAll("item");
                    
                    if (items.length === 0) {
                        blogContainer.innerHTML = "<p>Henüz yayınlanmış bir yazı bulunamadı.</p>";
                        return;
                    }

                    let html = "";
                    items.forEach((item, index) => {
                        if (index >= 5) return; // İlk 5 yazıyı göster
                        
                        // 3. Tarih Formatını Düzeltme
                        const pubDate = new Date(item.querySelector("pubDate").textContent);
                        const formattedDate = pubDate.toLocaleDateString("tr-TR", {
                            year: "numeric",
                            month: "long",
                            day: "numeric"
                        });
                        
                        // 4. HTML İçeriğini Temizleme
                        const description = item.querySelector("description").textContent;
                        const tempDiv = document.createElement("div");
                        tempDiv.innerHTML = description;
                        const cleanText = tempDiv.textContent.substring(0, 150) + "...";

                        html += `
                            <div class="blog-post">
                                <h2 class="post-title">
                                    <a href="${item.querySelector("link").textContent}" target="_blank">
                                        ${item.querySelector("title").textContent}
                                    </a>
                                </h2>
                                <p class="post-date">${formattedDate}</p>
                                <div class="post-excerpt">${cleanText}</div>
                                <a href="${item.querySelector("link").textContent}" class="read-more" target="_blank">Devamını Oku</a>
                            </div>
                        `;
                    });

                    blogContainer.innerHTML = html;
                })
                .catch(error => {
                    console.error("Hata:", error);
                    blogContainer.innerHTML = "<p>Yazılar yüklenirken bir hata oluştu.</p>";
                });
        });
    </script>
</body>
</html>
